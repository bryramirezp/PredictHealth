{% extends "base.html" %}

{% block title %}Doctor Details - PredictHealth CMS{% endblock %}

{% block page_title %}Doctor Details{% endblock %}

{% block page_subtitle %}View detailed information about {{ doctor.first_name }} {{ doctor.last_name }}{% endblock %}

{% block content %}
<div class="row">
  <div class="col-lg-8">
    <div class="entity-card">
      <div class="entity-header-row">
        <div>
          <h3 class="entity-name">{{ doctor.first_name }} {{ doctor.last_name }}</h3>
          <p class="entity-specialty">{{ specialty.name if specialty else 'Specialty not specified' }}</p>
        </div>
        {% if doctor.professional_status == 'active' %}
          <span class="badge bg-success">Active</span>
        {% elif doctor.professional_status == 'suspended' %}
          <span class="badge bg-warning">Suspended</span>
        {% else %}
          <span class="badge bg-secondary">Retired</span>
        {% endif %}
      </div>

      <div class="entity-meta">
        <span><i class="bi bi-building me-1"></i>{{ institution.name if institution else 'Independent' }}</span>
        <span><i class="bi bi-award me-1"></i>{{ doctor.years_experience }} years experience</span>
        <span><i class="bi bi-envelope me-1"></i>{{ doctor.email }}</span>
        <span><i class="bi bi-telephone me-1"></i>{{ doctor.phone }}</span>
      </div>

      <div class="entity-stats">
        <span><i class="bi bi-upc me-1"></i>License: {{ doctor.medical_license }}</span>
        {% if doctor.consultation_fee %}
          <span><i class="bi bi-cash me-1"></i>Fee: ${{ doctor.consultation_fee }}</span>
        {% endif %}
        <span><i class="bi bi-calendar me-1"></i>Joined: {{ doctor.created_at.strftime('%B %d, %Y') if doctor.created_at else 'Unknown' }}</span>
      </div>
    </div>
  </div>

  <div class="col-lg-4">
    <div class="entity-card">
      <h5>Actions</h5>
      <div class="d-grid gap-2">
        <a href="{{ url_for('entities.edit_doctor', doctor_id=doctor.id) }}" class="btn btn-primary">
          <i class="bi bi-pencil me-1"></i>Edit Doctor
        </a>
        <form action="{{ url_for('entities.delete_doctor', doctor_id=doctor.id) }}" method="POST" onsubmit="return confirm('Are you sure you want to delete this doctor? This action cannot be undone.')">
          <input type="hidden" name="csrf_token" value="{{ csrf_token() }}"/>
          <button type="submit" class="btn btn-danger w-100">
            <i class="bi bi-trash me-1"></i>Delete Doctor
          </button>
        </form>
        <hr>
        <a href="{{ url_for('entities.doctors') }}" class="btn btn-secondary">
          <i class="bi bi-arrow-left me-1"></i>Back to Doctors
        </a>
      </div>
    </div>
  </div>
</div>
{% endblock %}