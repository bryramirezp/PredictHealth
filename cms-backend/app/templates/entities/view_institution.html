{% extends "base.html" %}

{% block title %}Institution Details - PredictHealth CMS{% endblock %}

{% block page_title %}Institution Details{% endblock %}

{% block page_subtitle %}View detailed information about {{ institution.name }}{% endblock %}

{% block content %}
<div class="row">
  <div class="col-lg-8">
    <div class="entity-card">
      <div class="entity-header-row">
        <div>
          <h3 class="entity-name">{{ institution.name }}</h3>
          <p class="entity-specialty">{{ institution.institution_type.replace('_', ' ').title() }}</p>
        </div>
        {% if institution.is_active %}
          <span class="badge bg-success">Active</span>
        {% else %}
          <span class="badge bg-secondary">Inactive</span>
        {% endif %}
      </div>

      <div class="entity-meta">
        {% if institution.contact_email %}
          <span><i class="bi bi-envelope me-1"></i>{{ institution.contact_email }}</span>
        {% endif %}
        {% if institution.phone %}
          <span><i class="bi bi-telephone me-1"></i>{{ institution.phone }}</span>
        {% endif %}
        {% if institution.region_state %}
          <span><i class="bi bi-geo-alt me-1"></i>{{ institution.region_state }}</span>
        {% endif %}
      </div>

      <div class="entity-stats">
        {% if institution.license_number %}
          <span><i class="bi bi-upc me-1"></i>License: {{ institution.license_number }}</span>
        {% endif %}
        {% if institution.is_verified %}
          <span><i class="bi bi-shield-check me-1"></i>Verified</span>
        {% else %}
          <span><i class="bi bi-shield-x me-1"></i>Not Verified</span>
        {% endif %}
        <span><i class="bi bi-calendar me-1"></i>Joined: {{ institution.created_at.strftime('%B %d, %Y') if institution.created_at else 'Unknown' }}</span>
      </div>

      {% if institution.address %}
      <div class="entity-meta">
        <span><i class="bi bi-house me-1"></i>{{ institution.address }}</span>
      </div>
      {% endif %}

      {% if institution.website %}
      <div class="entity-meta">
        <span><i class="bi bi-globe me-1"></i><a href="{{ institution.website }}" target="_blank">{{ institution.website }}</a></span>
      </div>
      {% endif %}
    </div>
  </div>

  <div class="col-lg-4">
    <div class="entity-card">
      <h5>Actions</h5>
      <div class="d-grid gap-2">
        <a href="{{ url_for('entities.edit_institution', institution_id=institution.id) }}" class="btn btn-primary">
          <i class="bi bi-pencil me-1"></i>Edit Institution
        </a>
        <form action="{{ url_for('entities.delete_institution', institution_id=institution.id) }}" method="POST" onsubmit="return confirm('Are you sure you want to delete this institution? This action cannot be undone.')">
          <input type="hidden" name="csrf_token" value="{{ csrf_token() }}"/>
          <button type="submit" class="btn btn-danger w-100">
            <i class="bi bi-trash me-1"></i>Delete Institution
          </button>
        </form>
        <hr>
        <a href="{{ url_for('entities.institutions') }}" class="btn btn-secondary">
          <i class="bi bi-arrow-left me-1"></i>Back to Institutions
        </a>
      </div>
    </div>
  </div>
</div>
{% endblock %}